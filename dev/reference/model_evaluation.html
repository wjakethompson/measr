<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add model evaluation metrics model objects — model_evaluation • measr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet"><link href="../deps/Playfair_Display-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Add model evaluation metrics model objects — model_evaluation"><meta name="description" content="Add model evaluation metrics to fitted model objects. These functions are
wrappers around other functions that compute the metrics. The benefit of
using these wrappers is that the model evaluation metrics are saved as part
of the model object so that time-intensive calculations do not need to be
repeated. See Details for specifics."><meta property="og:description" content="Add model evaluation metrics to fitted model objects. These functions are
wrappers around other functions that compute the metrics. The benefit of
using these wrappers is that the model evaluation metrics are saved as part
of the model object so that time-intensive calculations do not need to be
repeated. See Details for specifics."><meta property="og:image" content="https://measr.info/reference/figures/card.png"><meta property="og:image:alt" content=""><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@wjakethompson"><meta name="twitter:site" content="@atlas4learning"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">measr</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/measr.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/paper.html">measr: Bayesian psychometric measurement using Stan</a></li>
    <li><a class="dropdown-item" href="../articles/model-estimation.html">Estimating diagnostic classification models</a></li>
    <li><a class="dropdown-item" href="../articles/model-evaluation.html">Evaluating diagnostic classification models</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Case Studies</h6></li>
    <li><a class="dropdown-item" href="../articles/ecpe.html">Examination for the Certificate of Proficiency in English</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.wjakethompson.com/blog/measr/2024-02-measr-1.0.0/">Version 1.0.0</a></li>
    <li><a class="external-link dropdown-item" href="https://www.wjakethompson.com/blog/measr/2023-06-measr-0.3.1/">Version 0.3.1</a></li>
    <li><a class="external-link dropdown-item" href="https://www.wjakethompson.com/blog/measr/2023-04-measr-0.2.1/">Version 0.2.1</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/wjakethompson/measr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Add model evaluation metrics model objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/wjakethompson/measr/blob/main/R/model-evaluation.R" class="external-link"><code>R/model-evaluation.R</code></a></small>
      <div class="d-none name"><code>model_evaluation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Add model evaluation metrics to fitted model objects. These functions are
wrappers around other functions that compute the metrics. The benefit of
using these wrappers is that the model evaluation metrics are saved as part
of the model object so that time-intensive calculations do not need to be
repeated. See Details for specifics.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_criterion</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  criterion <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"loo"</span>, <span class="st">"waic"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  r_eff <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">add_reliability</span><span class="op">(</span><span class="va">x</span>, overwrite <span class="op">=</span> <span class="cn">FALSE</span>, save <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">add_fit</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m2"</span>, <span class="st">"ppmc"</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  ci <span class="op">=</span> <span class="fl">0.9</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">add_respondent_estimates</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.025</span>, <span class="fl">0.975</span><span class="op">)</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  save <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <a href="measrfit.html">measrfit</a> object.</p></dd>


<dt id="arg-criterion">criterion<a class="anchor" aria-label="anchor" href="#arg-criterion"></a></dt>
<dd><p>A vector of criteria to calculate and add to the model
object. Must be one of <code>"loo"</code> or <code>"waic"</code> for models estimated with MCMC,
or one of <code>"aic"</code> or <code>"bic"</code> for model estimated with the optimizer.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Logical. Indicates whether specified elements that have
already been added to the estimated model should be overwritten. Default is
<code>FALSE</code>.</p></dd>


<dt id="arg-save">save<a class="anchor" aria-label="anchor" href="#arg-save"></a></dt>
<dd><p>Logical. Only relevant if a file was specified in the
<a href="measrfit.html">measrfit</a> object passed to <code>x</code>. If <code>TRUE</code> (the default), the model is
re-saved to the specified file when new criteria are added to the <code>R</code>
object. If <code>FALSE</code>, the new criteria will be added to the <code>R</code> object, but
the saved file will not be updated.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed relevant methods. See Details.</p></dd>


<dt id="arg-r-eff">r_eff<a class="anchor" aria-label="anchor" href="#arg-r-eff"></a></dt>
<dd><p>Vector of relative effective sample size estimates for the
likelihood (<code>exp(log_lik)</code>) of each observation. This is related to
the relative efficiency of estimating the normalizing term in
self-normalized importance sampling when using posterior draws obtained
with MCMC. If MCMC draws are used and <code>r_eff</code> is not provided then
the reported PSIS effective sample sizes and Monte Carlo error estimates
can be over-optimistic. If the posterior draws are (near) independent then
<code>r_eff=1</code> can be used. <code>r_eff</code> has to be a scalar (same value is used
for all observations) or a vector with length equal to the number of
observations. The default value is 1. See the <code><a href="https://mc-stan.org/loo/reference/relative_eff.html" class="external-link">relative_eff()</a></code> helper
functions for help computing <code>r_eff</code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>A vector of model fit methods to evaluate and add to the model
object.</p></dd>


<dt id="arg-ci">ci<a class="anchor" aria-label="anchor" href="#arg-ci"></a></dt>
<dd><p>The confidence interval for the RMSEA, computed from the M2</p></dd>


<dt id="arg-probs">probs<a class="anchor" aria-label="anchor" href="#arg-probs"></a></dt>
<dd><p>The percentiles to be computed by the <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">stats::quantile()</a></code>
function to summarize the posterior distributions of each person parameter.
Only relevant if <code>method = "mcmc"</code> was used to estimate the model.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A modified <a href="measrfit.html">measrfit</a> object with the corresponding slot populated
with the specified information.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For <code>add_respondent_estimates()</code>, estimated person parameters are added to
the <code>$respondent_estimates</code> element of the fitted model.</p>
<p>For <code>add_fit()</code>, model and item fit information are added to the <code>$fit</code>
element of the fitted model. This function wraps <code><a href="https://rdrr.io/pkg/dcm2/man/fit_m2.html" class="external-link">fit_m2()</a></code> to calculate the
M<sub>2</sub> statistic (Hansen et al., 2016;
Liu et al., 2016) and/or <code><a href="fit_ppmc.html">fit_ppmc()</a></code> to calculate posterior predictive model
checks (Park et al., 2015; Sinharay &amp; Almond, 2007; Sinharay et al., 2006;
Thompson, 2019), depending on which methods are specified. Additional
arguments supplied to <code>...</code> are passed to <code><a href="fit_ppmc.html">fit_ppmc()</a></code>.</p>
<p>For <code>add_criterion()</code>, relative fit criteria are added to the <code>$criteria</code>
element of the fitted model. This function wraps <code><a href="https://mc-stan.org/loo/reference/loo.html" class="external-link">loo()</a></code> and/or <code><a href="https://mc-stan.org/loo/reference/waic.html" class="external-link">waic()</a></code>,
depending on which criteria are specified, to calculate the leave-one-out
(<acronym>LOO</acronym>; Vehtari et al., 2017) and/or widely applicable information
criteria (<acronym>WAIC</acronym>; Watanabe, 2010) to fitted model objects.
Additional arguments supplied to <code>...</code> are passed to <code><a href="https://mc-stan.org/loo/reference/loo.html" class="external-link">loo::loo.array()</a></code> or
<code><a href="https://mc-stan.org/loo/reference/waic.html" class="external-link">loo::waic.array()</a></code>.</p>
<p>For <code>add_reliability()</code>, reliability information is added to the
<code>$reliability</code> element of the fitted model. Pattern level reliability is
described by Cui et al. (2012). Classification reliability and posterior
probability reliability are described by Johnson &amp; Sinharay (2018, 2020),
respectively. This function wraps <code><a href="reliability.html">reliability()</a></code>. Arguments supplied to
<code>...</code> are passed to <code><a href="reliability.html">reliability()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Cui, Y., Gierl, M. J., &amp; Chang, H.-H. (2012). Estimating
classification consistency and accuracy for cognitive diagnostic
assessment. <em>Journal of Educational Measurement, 49</em>(1), 19-38.
<a href="https://doi.org/10.1111/j.1745-3984.2011.00158.x" class="external-link">doi:10.1111/j.1745-3984.2011.00158.x</a></p>
<p>Hansen, M., Cai, L., Monroe, S., &amp; Li, Z. (2016).
Limited-information goodness-of-fit testing of diagnostic classification
item response models. <em>British Journal of Mathematical and Statistical
Psychology, 69</em>(3), 225-252. <a href="https://doi.org/10.1111/bmsp.12074" class="external-link">doi:10.1111/bmsp.12074</a></p>
<p>Johnson, M. S., &amp; Sinharay, S. (2018). Measures of agreement to
assess attribute-level classification accuracy and consistency for
cognitive diagnostic assessments. <em>Journal of Educational Measurement,
55</em>(4), 635-664. <a href="https://doi.org/10.1111/jedm.12196" class="external-link">doi:10.1111/jedm.12196</a></p>
<p>Johnson, M. S., &amp; Sinharay, S. (2020). The reliability of the
posterior probability of skill attainment in diagnostic classification
models. <em>Journal of Educational and Behavioral Statistics, 45</em>(1), 5-31.
<a href="https://doi.org/10.3102/1076998619864550" class="external-link">doi:10.3102/1076998619864550</a></p>
<p>Liu, Y., Tian, W., &amp; Xin, T. (2016). An application of
M<sub>2</sub> statistic to evaluate the fit
of cognitive diagnostic models. <em>Journal of Educational and Behavioral
Statistics, 41</em>(1), 3-26. <a href="https://doi.org/10.3102/1076998615621293" class="external-link">doi:10.3102/1076998615621293</a></p>
<p>Park, J. Y., Johnson, M. S., Lee, Y-S. (2015). Posterior
predictive model checks for cognitive diagnostic models. <em>International
Journal of Quantitative Research in Education, 2</em>(3-4), 244-264.
<a href="https://doi.org/10.1504/IJQRE.2015.071738" class="external-link">doi:10.1504/IJQRE.2015.071738</a></p>
<p>Sinharay, S., &amp; Almond, R. G. (2007). Assessing fit of cognitive
diagnostic models. <em>Educational and Psychological Measurement, 67</em>(2),
239-257. <a href="https://doi.org/10.1177/0013164406292025" class="external-link">doi:10.1177/0013164406292025</a></p>
<p>Sinharay, S., Johnson, M. S., &amp; Stern, H. S. (2006). Posterior
predictive assessment of item response theory models. <em>Applied
Psychological Measurement, 30</em>(4), 298-321.
<a href="https://doi.org/10.1177/0146621605285517" class="external-link">doi:10.1177/0146621605285517</a></p>
<p>Thompson, W. J. (2019). <em>Bayesian psychometrics for diagnostic
assessments: A proof of concept</em> (Research Report No. 19-01). University
of Kansas; Accessible Teaching, Learning, and Assessment Systems.
<a href="https://doi.org/10.35542/osf.io/jzqs8" class="external-link">doi:10.35542/osf.io/jzqs8</a></p>
<p>Vehtari, A., Gelman, A., &amp; Gabry, J. (2017). Practical Bayesian
model evaluation using leave-one-out cross-validation and WAIC.
<em>Statistics and Computing, 27</em>(5), 1413-1432.
<a href="https://doi.org/10.1007/s11222-016-9696-4" class="external-link">doi:10.1007/s11222-016-9696-4</a></p>
<p>Watanabe, S. (2010). Asymptotic equivalence of Bayes cross
validation and widely applicable information criterion in singular learning
theory. <em>Journal of Machine Learning Research, 11</em>(116), 3571-3594.
<a href="https://jmlr.org/papers/v11/watanabe10a.html" class="external-link">https://jmlr.org/papers/v11/watanabe10a.html</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">cmds_mdm_dina</span> <span class="op">&lt;-</span> <span class="fu"><a href="measr_dcm.html">measr_dcm</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">mdm_data</span>, missing <span class="op">=</span> <span class="cn">NA</span>, qmatrix <span class="op">=</span> <span class="va">mdm_qmatrix</span>,</span></span>
<span class="r-in"><span>  resp_id <span class="op">=</span> <span class="st">"respondent"</span>, item_id <span class="op">=</span> <span class="st">"item"</span>, type <span class="op">=</span> <span class="st">"dina"</span>,</span></span>
<span class="r-in"><span>  method <span class="op">=</span> <span class="st">"optim"</span>, seed <span class="op">=</span> <span class="fl">63277</span>, backend <span class="op">=</span> <span class="st">"rstan"</span>,</span></span>
<span class="r-in"><span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="measrprior.html">prior</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Special.html" class="external-link">beta</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">17</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"slip"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="measrprior.html">prior</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Special.html" class="external-link">beta</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">17</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"guess"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cmds_mdm_dina</span> <span class="op">&lt;-</span> <span class="fu">add_reliability</span><span class="op">(</span><span class="va">cmds_mdm_dina</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cmds_mdm_dina</span> <span class="op">&lt;-</span> <span class="fu">add_fit</span><span class="op">(</span><span class="va">cmds_mdm_dina</span>, method <span class="op">=</span> <span class="st">"m2"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">cmds_mdm_dina</span> <span class="op">&lt;-</span> <span class="fu">add_respondent_estimates</span><span class="op">(</span><span class="va">cmds_mdm_dina</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://wjakethompson.com" class="external-link">W. Jake Thompson</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

